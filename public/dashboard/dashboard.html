<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="./dashboard.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    nav {
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
    }

    #navbar {
      background-color: #000000;
    }

    #navbar img {
      width: 50px;
      margin-right: 12px;
      filter: drop-shadow(1px 1px 5px #ffffff);
    }

    #navbar a {
      text-decoration: none;
      color: white;
      display: flex;
      justify-content: start;
      align-items: center;
      margin-left: 10px;
      font-weight: 600;
      font-size: 15px;
    }

    /* Sidebar */
    #sidebar {
      position: fixed;
      background-color: #000000;
      width: 300px;
      height: 100vh;
      color: rgb(197, 197, 197);
      padding-top: 70px; /* Adjust for navbar height */
      overflow-y: auto; /* Add scrollbar if content exceeds height */
    }

    #sidebar ul li {
      list-style-type: none;
      margin-bottom: 15px; /* Add spacing between list items */
    }

    #sidebar ul li a {
      font-size: 18px;
      text-decoration: none;
      color: rgb(255, 255, 255);
      display: block; /* Make links fill the entire list item */
      padding: 8px 16px; /* Add padding for better click target */
    }

    #sidebar ul li a:hover {
      color: black;
      background-color: #f0f0f0; /* Add hover effect */
    }

    /* Main content */
    main {
      margin-left: 300px; /* Match sidebar width */
      padding-top: 70px; /* Account for navbar */
      transition: margin-left 0.3s ease; /* Smooth transition for sidebar toggle */
    }

    .table button {
      margin: 2px;
      width: 50px;
    }

    #dashboard h2 {
      width: 100%;
      background-color: gray;
      padding: 10px;
      color: white;
    }

    #products h2, #orders h2, #customers h2 {
      width: 100%;
      padding: 10px;
      background-color: rgb(202, 202, 202);
    }

    /* Add Product Button */
    #add-product-btn {
      margin: 15px 0;
    }

    /* Responsive adjustments */
    @media (max-width: 992px) {
      #sidebar {
        width: 250px; /* Reduce width on smaller screens */
      }
      main {
        margin-left: 250px;
      }
    }

    @media (max-width: 768px) {
      #sidebar {
        position: static; /* Make sidebar non-fixed on smallest screens */
        width: 100%;
        height: auto;
      }
      main {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="bg-white border-bottom position-fixed" id="nav">
    <div id="navbar" class="py-2">
      <a href=""><img src="../images/hasharon logo.png" alt="Hasharon Logo" class="ms-5">Hasharon Marketing</a>
    </div>
  </nav>

  <!-- Sidebar -->
  <div id="sidebar" class="position-fixed">
    <ul class="list-unstyled">
      <li class="mb-3"><a href="#dashboard" class="text-decoration-none">Dashboard</a></li>
      <li class="mb-3"><a href="#products" class="text-decoration-none">Products</a></li>
      <li class="mb-3"><a href="#orders" class="text-decoration-none">Orders</a></li>
      <li class="mb-3"><a href="#customers" class="text-decoration-none">Customers</a></li>
    </ul>
    <hr>
    <ul class="list-unstyled">
      <li><a href="../index.html" class="text-decoration-none text-white">Sign Out</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <main class="ms-300px mt-5 pt-4">  <!-- Adjust ms-300px to match sidebar width -->
    <section id="dashboard" class="container">
      <h2 class="mb-4">Dashboard Overview</h2>
      <div class="row">
        <div class="col-md-4 mb-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Total Sales</h5>
              <p class="card-text">â‚±12,345</p>
            </div>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Total Orders</h5>
              <p class="card-text">15</p>
            </div>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Total Customers</h5>
              <p class="card-text">10</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="products" class="container mt-5">
      <h2 class="mb-4">Products</h2>
      <button id="add-product-btn" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#productModal">Add Product</button>
      <table class="table">
        <thead>
          <tr>
            <th>Product Name</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="products-table">
          <!-- Product Rows will be rendered by JS -->
        </tbody>
      </table>
    </section>

    <section id="orders" class="container mt-5">
      <h2>Orders</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Id</th>
            <th>Product Name</th>
            <th>Date</th>
            <th>Status</th>
            <th>Payment</th>
            <th>Amount</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="orders-table">
          <!-- Orders Data will be rendered by JS -->
        </tbody>
      </table>  
    </section>

    <section id="customers" class="container mt-5">
      <h2>Customers</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Password</th>
            <th>Type</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="customers-table">
          <!-- Customers Data will be rendered by JS -->
        </tbody>
      </table>  
    </section>
  </main>

  <!-- Modal for Add/Edit Product -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="productModalLabel">Add/Edit Product</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="product-form">
            <div class="mb-3">
              <label for="product-name" class="form-label">Product Name</label>
              <input type="text" class="form-control" id="product-name" required>
            </div>
            <div class="mb-3">
              <label for="product-price" class="form-label">Price</label>
              <input type="number" class="form-control" id="product-price" required>
            </div>
            <div class="mb-3">
              <label for="product-stock" class="form-label">Stock</label>
              <input type="number" class="form-control" id="product-stock" required>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Save</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Sample data
      const productsData = [
        { id: 1, name: "Product A", price: 10, stock: 100 },
        { id: 2, name: "Product B", price: 20, stock: 50 },
        { id: 3, name: "Product C", price: 30, stock: 200 },
      ];

      const ordersData = [
        { id: "#123412", name: "Product A", date: "2024-12-12", status: "pending", payment: "cash on delivery", amount: 20000 },
        { id: "#124123", name: "Product B", date: "2024-12-12", status: "pending", payment: "cash on delivery", amount: 15000 },
        { id: "#91824", name: "Product C", date: "2024-12-11", status: "pending", payment: "cash on delivery", amount: 10000 },
      ];

      const customersData = [
        { id: 1, name: "User 1", email: "user1@example.com", password: "12345", type: "buyer" },
        { id: 2, name: "User 2", email: "user2@example.com", password: "67890", type: "buyer" },
        { id: 3, name: "Admin", email: "admin@example.com", password: "admin", type: "admin" },
      ];

      // Function to render products table
      const renderProductsTable = () => {
        const tbody = document.getElementById('products-table');
        tbody.innerHTML = "";
        productsData.forEach(product => {
          tbody.innerHTML += `
            <tr data-id="${product.id}">
              <td>${product.name}</td>
              <td>${product.price}</td>
              <td>${product.stock}</td>
              <td>
                <button class="btn btn-warning btn-sm edit-product" data-id="${product.id}">Edit</button>
                <button class="btn btn-danger btn-sm delete-product" data-id="${product.id}">Delete</button>
              </td>
            </tr>
          `;
        });

        // Add event listeners to edit and delete buttons
        document.querySelectorAll('.edit-product').forEach(button => {
          button.addEventListener('click', handleEditProduct);
        });

        document.querySelectorAll('.delete-product').forEach(button => {
          button.addEventListener('click', handleDeleteProduct);
        });
      };

      // Handle Add Product Modal
      const handleEditProduct = (e) => {
        const productId = e.target.dataset.id;
        const product = productsData.find(product => product.id == productId);
        
        // Fill the form fields with the product's current data
        document.getElementById('product-name').value = product.name;
        document.getElementById('product-price').value = product.price;
        document.getElementById('product-stock').value = product.stock;

        const form = document.getElementById('product-form');
        form.onsubmit = (e) => {
          e.preventDefault();
          const updatedProduct = {
            id: productId,
            name: document.getElementById('product-name').value,
            price: document.getElementById('product-price').value,
            stock: document.getElementById('product-stock').value,
          };

          // Update product data
          const index = productsData.findIndex(p => p.id == productId);
          if (index > -1) {
            productsData[index] = updatedProduct;
            renderProductsTable();
          }

          // Close the modal
          const modal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
          modal.hide();
        };
      };

      // Delete Product
      const handleDeleteProduct = (e) => {
        const productId = e.target.dataset.id;
        const index = productsData.findIndex(p => p.id == productId);
        if (index > -1) {
          productsData.splice(index, 1);
          renderProductsTable();
        }
      };

      // Initialize tables
      renderProductsTable();

      // Add Product Button Event Listener
      document.getElementById('add-product-btn').addEventListener('click', () => {
        // Reset the form fields for a new product
        document.getElementById('product-name').value = '';
        document.getElementById('product-price').value = '';
        document.getElementById('product-stock').value = '';
        
        const form = document.getElementById('product-form');
        form.onsubmit = (e) => {
          e.preventDefault();
          const newProduct = {
            id: productsData.length + 1,
            name: document.getElementById('product-name').value,
            price: document.getElementById('product-price').value,
            stock: document.getElementById('product-stock').value,
          };

          // Add new product
          productsData.push(newProduct);
          renderProductsTable();

          // Close the modal
          const modal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
          modal.hide();
        };
      });
    });
  </script>
</body>
</html>
